{% extends "base.html" %}

{% block title %}
BLAST Dashboard
{% endblock %}

{% block infoheader %} SynMibi Refseq Transaction Dashboard {% endblock %}

{% block page_header %}
Welcome to your Refseq Transaction dashboard, {{request.user}}!
{% endblock %}

{% block page_description %}
Manage your refseq databases. This website allows transactions with the <a href="ftp://ftp.ncbi.nih.gov/genomes/refseq/">refseq database</a>.
Particularly, the functions triggered by the form submit either interact with a previously downloaded <a href="ftp://ftp.ncbi.nih.gov/genomes/refseq/assembly_summary_refseq.txt">assembly_summary_refseq.txt</a>
to create BLAST databases with the makeblastdb script, or they refresh the assembly_summary_refseq.txt file.
{% endblock %}


{% block content %}

<hr>
<div class="row" style="display: none" id="loading_div">
    <div style="text-align: center" >
      <div class="container-fluid">
          <p align="center"><iframe src="https://giphy.com/embed/11FuEnXyGsXFba" width="200" height="200" frameBorder="0" class="giphy-embed" allowFullScreen></iframe></p>
          <p><a href="https://giphy.com/gifs/icon-loading-beaker-11FuEnXyGsXFba"></a></p>
      </div>
    </div>
</div>

<div class="container-fluid" id="post_form_container">
    <div class="row">
        <div class="col" style="text-align: right">

            <form action="{% url 'download_refseq_assembly_summary' %}" method="post" onsubmit="showLoader('loading_div','post_form_container')">
                {% csrf_token %}
                <div class="form-group">
                    <a href="#" data-toggle="tooltip" {% if refseq_exists %} title="RefSeq assembly summary exists, but you can download a newer version!" {% endif %}>
                        <input type="submit" value="Download New RefSeq Assembly Summary" class="btn btn-primary btn-dark">
                    </a>
                </div>
            </form>

        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
    <script>
    $(document).ready(function(){
      $('[data-toggle="tooltip"]').tooltip();
    });
    </script>
{% endblock %}
